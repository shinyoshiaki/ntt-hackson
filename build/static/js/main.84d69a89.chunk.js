(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{343:function(e,t,n){e.exports=n(723)},390:function(e,t){},723:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),c=n(33),r=n.n(c),i=n(43),s=n.n(i),u=n(84),l=n(63),f=n(74),d=n(255),m=n.n(d),h=n(256);n(259);function v(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return console.log("display"),new Promise(function(e){navigator.getDisplayMedia({video:!0}).then(function(t){e(t)})})}var p=n(257),g=n.n(p),b=n(173),w=n.n(b),j=g.a.connect("https://aqueous-earth-75182.herokuapp.com/");function O(e){return new Promise(function(t){j.emit("create",{room:e});var n=new w.a({nodeId:"answer"});j.on("offer",function(e){n.makeAnswer(e.sdp)}),n.signal=function(t){j.emit("answer",{sdp:t,room:e})},n.connect=function(){j.emit("connect",{room:e}),console.log("connect create"),t(n)},n.addOnData(function(e){console.log({message:e})},"answer")})}function y(e){return new Promise(function(t){j.emit("join",{room:e});var n=new w.a({nodeId:"offer"});j.on("join",function(){n.makeOffer(),n.signal=function(t){j.emit("offer",{sdp:t,room:e})},j.on("answer",function(e){n.setAnswer(e.sdp)}),n.connect=function(){console.log("connect join"),t(n)},n.addOnData(function(e){console.log({message:e})},"offer")})})}var E,k=function(e){var t=e.isTeacher,n=e.room,c=Object(a.useState)(""),r=Object(l.a)(c,2),i=r[0],d=r[1],m=Object(a.useState)(void 0),h=Object(l.a)(m,2),v=h[0],p=h[1];Object(a.useEffect)(function(){g()},[]);var g=function(){var e=Object(u.a)(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,O(n);case 3:(a=e.sent).addOnData(function(e){console.log({raw:e}),"share"===e.label&&d(e.data)}),p(a),e.next=9;break;case 8:setTimeout(Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n);case 2:(a=e.sent).addOnData(function(e){console.log({raw:e}),"share"===e.label&&d(e.data)}),p(a);case 5:case"end":return e.stop()}},e,this)})),1e3);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return console.log({peer:v}),o.a.createElement("div",null,o.a.createElement("p",null,"shareboard"),v&&o.a.createElement("div",null,o.a.createElement(f.b,{multiline:!0,rows:"5",value:i,onChange:function(e){d(e.target.value),v.send(e.target.value,"share")}})))},x=o.a.createRef(),R=o.a.createRef(),P=o.a.createRef(),D=o.a.createRef(),S=function(e,t){var n=E.joinRoom(e,{mode:"sfu",stream:R.srcObject});if(n){n.on("stream",function(e){x.srcObject=e});var a=E.joinRoom(e+"video",{mode:"sfu",stream:D.srcObject});a&&a.on("stream",function(e){P.srcObject=e,t()})}},C=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("def"),i=Object(l.a)(r,2),d=i[0],p=i[1],g=Object(a.useState)("def"),b=Object(l.a)(g,2),w=b[0],j=b[1];function O(){return(O=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return R.srcObject=e.sent,e.next=5,Object(h.getLocalVideo)();case 5:D.srcObject=e.sent;case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}return Object(a.useEffect)(function(){E=new m.a({key:"725b7ef3-cd3d-4032-b019-00fc43b6639f",debug:3}),function(){O.apply(this,arguments)}()},[]),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(f.b,{value:n,onChange:function(e){c(e.target.value)}}),o.a.createElement(f.a,{onClick:function(){j("connecting"),S(n,function(){p("teacher"),j("connected")})}},"teacher"),o.a.createElement(f.a,{onClick:function(){j("connecting"),S(n,function(){p("student"),j("connected")})}},"student"),o.a.createElement("p",{style:{paddingRight:30}}),o.a.createElement("p",{style:{paddingRight:30}},n),o.a.createElement("p",{style:{paddingRight:30}},"def"!==d&&d),o.a.createElement("p",{style:{paddingRight:30}},"def"!==w&&w)),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("video",{ref:function(e){return D=e},autoPlay:!0,style:{height:"40vh"}}),o.a.createElement("video",{ref:function(e){return P=e},autoPlay:!0,style:{height:"40vh"}})),o.a.createElement("div",{style:{display:"flex"}},"teacher"!==d&&o.a.createElement("video",{ref:function(e){return R=e},autoPlay:!0,style:{height:"teacher"===d?"0vh":"40vh",width:"teacher"===d?"0vw":"auto"}}),"student"!==d&&o.a.createElement("video",{ref:function(e){return x=e},autoPlay:!0,style:{height:"40vh"}}),"def"!==d&&o.a.createElement(k,{isTeacher:"teacher"===d,room:n}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[343,2,1]]]);
//# sourceMappingURL=main.84d69a89.chunk.js.map